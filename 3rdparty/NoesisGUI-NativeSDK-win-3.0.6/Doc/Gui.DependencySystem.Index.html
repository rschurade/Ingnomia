<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>Dependency System - Documentation | NoesisGUI</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.16: http://docutils.sourceforge.net/" />
<meta content="The purpose of dependency system is to provide a way to compute property values based on the value of other inputs" name="description" />

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@noesisengine" />
<meta name="twitter:url" content="https://www.noesisengine.com/docs/Gui.DependencySystem.Index.html" />
<meta name="twitter:title" content="Dependency System | NoesisGUI" />
<meta name="twitter:description" content="The purpose of dependency system is to provide a way to compute property values based on the value of other inputs" />
<meta name="twitter:image" content="https://www.noesisengine.com/images/logos/logo-flat.png" />

<!-- Facebook Cards -->
<meta property="og:title" content="Dependency System | NoesisGUI" />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://www.noesisengine.com/images/logos/logo-flat.png" />
<meta property="og:image:alt" content="NoesisGUI logo" />
<meta property="article:published_time" content="2020-09-18 14:45:25" />
<meta property="og:description" content="The purpose of dependency system is to provide a way to compute property values based on the value of other inputs" />
<meta property="og:url" content="https://www.noesisengine.com/docs/Gui.DependencySystem.Index.html" />
<meta property="og:site_name" content="NoesisGUI" />

<link rel="canonical" href="https://www.noesisengine.com/docs/Gui.DependencySystem.Index.html" />
<link rel="shortcut icon" href="/favicon.ico" />

<!--script src="https://use.typekit.net/taq4txx.js"></script-->
<!--script>try{Typekit.load({ async: true });}catch(e){}</script-->

<link rel="stylesheet" href="style/noesis.css?version=6" type="text/css" media="all"/>

<!-- Google Analytics Code -->
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-25866290-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

<script src="/js/vendor/modernizr.js"></script>


</head>
<body>
<div class="document" id="dependency-system">


    <!-- NOESIS WEB ------- BEGIN ------- -->

    <div class="developers documentation">

        <!--[if lt IE 9]>
        <script type="text/javascript" src="/js/vendor/selectivizr.js"></script>
        <script type="text/javascript" src="/js/vendor/respond.js"></script>
        <div class="old-browser-warning">
            You are using a very old browser.<br>
            To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser. <br>
            A list of the most popular web browsers <a href="http://browsehappy.com/">can be found here</a>
        </div>
        <![endif]-->

        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <symbol id="svg-icon-social-vimeo" width="30" height="30" viewBox="-26 20 30 30">
                <path d="M-23,30.2c2.1-1.7,5.1-4.8,7.5-4.8c2.3,0,2.9,2.2,3.2,4.7c0.3,2.5,1.2,7.8,2.5,7.8 c1.2,0,4.1-4.7,3.9-6.6c-0.2-1.8-2.2-1.6-3.3-1c1-3.7,3.4-5.8,6.5-5.8c3.1,0,3.8,2.3,3.8,4.9c0,3.9-8.2,16-13.1,16 c-3.1,0-3.8-4.4-4.4-6.6c-0.6-2.2-1.8-7.9-3.3-8.3c-0.6-0.1-2.1,1.1-2.1,1.1L-23,30.2z"/>
            </symbol>
            <symbol id="svg-icon-social-google" width="30" height="30" viewBox="-25 24 30 30">
                <path d="M-6.3 45.9c0 1-.3 2-.8 2.8-1.7 2.9-5.2 3.9-8.3 3.9-2.5 0-5.5-.6-6.9-2.9-.4-.6-.6-1.4-.6-2.1 0-1.9 1.1-3.4 2.7-4.3 1.9-1.2 4.4-1.5 6.6-1.6-.6-.8-1-1.4-1-2.4 0-.5.1-.9.3-1.4-.4 0-.7.1-1.1.1-3.2 0-5.8-2.3-5.8-5.6 0-1.8.9-3.6 2.2-4.8 1.8-1.5 4.3-2.1 6.6-2.1h6.9l-2.3 1.4H-10c1.5 1.3 2.5 2.7 2.5 4.8 0 4.2-3.9 4.7-3.9 6.8 0 2 5.1 2.7 5.1 7.4zm-2.3 1.4c0-2.2-2.2-3.6-3.8-4.7h-.8c-2.7 0-6.6.9-6.6 4.2 0 3.2 3.5 4.3 6.1 4.3 2.4 0 5.1-1 5.1-3.8zm-2.8-11.5c.7-.7.9-1.6.9-2.6 0-2.4-1.4-6.5-4.4-6.5-.9 0-1.9.5-2.4 1.2-.6.7-.8 1.7-.8 2.6 0 2.5 1.4 6.3 4.3 6.3.8 0 1.8-.4 2.4-1zm14.4.9v1.8H-.5v3.6h-1.7v-3.6h-3.5v-1.8h3.5v-3.6h1.7v3.6H3z">
            </symbol>
            <symbol id="svg-icon-social-twitter" width="30" height="30" viewBox="-25 20 30 30">
                <path d="M.4 29.7v.7c0 7-5.3 15.1-15.1 15.1-3 0-5.8-.9-8.1-2.4.4 0 .8.1 1.3.1 2.5 0 4.8-.8 6.6-2.3-2.3 0-4.3-1.6-5-3.7.3 0 .7.1 1 .1.5 0 1-.1 1.4-.2-2.4-.5-4.2-2.6-4.2-5.2v-.1c.7.4 1.5.6 2.4.7-1.4-1-2.4-2.6-2.4-4.4 0-1 .3-1.9.7-2.7 2.6 3.2 6.5 5.3 10.9 5.5-.1-.4-.1-.8-.1-1.2 0-2.9 2.4-5.3 5.3-5.3 1.5 0 2.9.6 3.9 1.7 1.2-.2 2.3-.7 3.4-1.3C2 26 1.2 27.1.1 27.7c1.1-.1 2.1-.4 3.1-.8C2.4 28 1.4 29 .4 29.7z">
            </symbol>
            <symbol id="svg-icon-social-facebook" width="30" height="30" viewBox="-31 24 30 30">
                <path d="M-8.7 29.8h-2.6c-2 0-2.4 1-2.4 2.4v3.1h4.8l-.6 4.9h-4.2v12.5h-5V40.1h-4.2v-4.9h4.2v-3.6c0-4.2 2.5-6.4 6.2-6.4 1.8 0 3.3.1 3.7.2v4.4z">
            </symbol>
            <symbol id="svg-icon-social-youtube" width="30" height="30" viewBox="-26 25 30 30">
                <path d="M.9 52c-.3 1.3-1.4 2.2-2.6 2.4-3 .3-6.1.3-9.1.3s-6.1 0-9.1-.3c-1.3-.1-2.3-1.1-2.6-2.4-.5-1.9-.5-3.9-.5-5.8s0-3.9.4-5.7c.3-1.3 1.4-2.2 2.6-2.4 3-.3 6.1-.3 9.1-.3s6.1 0 9.1.3c1.3.1 2.3 1.1 2.6 2.4.4 1.8.4 3.8.4 5.7.1 1.9.1 3.9-.3 5.8zm-17-9.8v-1.5h-5.1v1.5h1.7v9.3h1.6v-9.3h1.8zm2.7-16.9l-2 6.5v4.4H-17v-4.4c-.1-.8-.5-2-1-3.5-.4-1-.7-2.1-1.1-3.1h1.7l1.2 4.3 1.1-4.3h1.7zm1.8 26.2v-8.1h-1.5v6.2c-.3.5-.6.7-.9.7-.2 0-.3-.1-.3-.3v-6.6h-1.5v6.4c0 .6 0 1 .1 1.2.1.4.5.6 1 .6s1.1-.3 1.7-1v.9h1.4zM-9 33.6c0 .9-.1 1.5-.5 1.9-.4.6-1 .8-1.7.8s-1.3-.3-1.7-.8c-.3-.4-.5-1.1-.5-1.9v-2.9c0-.9.1-1.5.5-1.9.4-.6 1-.8 1.7-.8.8 0 1.3.3 1.7.8.3.4.5 1 .5 1.9v2.9zm-1.5-3.1c0-.8-.2-1.1-.7-1.1-.5 0-.7.4-.7 1.1v3.4c0 .8.2 1.1.7 1.1.5 0 .7-.4.7-1.1v-3.4zM-6 45.8c0-.8 0-1.3-.1-1.6-.2-.6-.6-.9-1.2-.9-.5 0-1 .3-1.5.9v-3.6h-1.5v10.9h1.5v-.8c.5.6 1 .9 1.5.9.6 0 1-.3 1.2-.9.1-.3.1-.9.1-1.6v-3.3zm-1.5 3.4c0 .7-.2 1.1-.6 1.1-.2 0-.5-.1-.7-.4V45c.2-.2.5-.4.7-.4.4 0 .6.4.6 1.1v3.5zm4-12.9H-5v-.9c-.6.7-1.1 1-1.7 1-.5 0-.8-.2-1-.6-.1-.2-.1-.6-.1-1.2v-6.5h1.5v6.6c0 .2.1.4.3.4.3 0 .6-.2.9-.7v-6.2h1.5v8.1zm3 12.4H-2v1c-.1.4-.3.6-.7.6-.5 0-.8-.4-.8-1.1v-1.4h2.9V46c0-.9-.1-1.5-.4-1.9-.4-.6-1-.8-1.7-.8-.8 0-1.3.3-1.8.8-.3.4-.5 1-.5 1.9v2.8c0 .9.2 1.5.5 1.9.4.6 1 .8 1.8.8s1.4-.3 1.8-.9c.2-.3.3-.6.3-.9v-1zM-2 46.5h-1.5v-.8c0-.7.2-1.1.7-1.1s.8.4.8 1.1v.8z">
            </symbol>
            <symbol id="svg-icon-social-linkedin" width="30" height="30" viewBox="-26 25 30 30">
                <path d="M-22.6 51.3h5v-15h-5v15zm17.8-15.5c-2.2 0-3.5.8-4.8 2.6v-2.1h-5v15h5v-8.1c0-1.7.9-3.4 2.8-3.4 2 0 3.2 1.7 3.2 3.4v8.2h5v-8.5c0-6-4-7.1-6.2-7.1zM-20.1 29c-1.6 0-2.9 1.2-2.9 2.6 0 1.5 1.3 2.6 2.9 2.6 1.6 0 2.9-1.2 2.9-2.6.1-1.4-1.2-2.6-2.9-2.6z">
            </symbol>
            <symbol id="svg-scroll-down" width="48" height="48" viewBox="0 0 48 48">
                <path d="M24 1C11.3 1 1 11.3 1 24s10.3 23 23 23 23-10.3 23-23S36.7 1 24 1zm0 31.5L11.9 21.6l1.3-1.5L24 29.8l10.7-9.7 1.3 1.5-12 10.9z">
            </symbol>
        </svg>

        <header id="header" class="SOZO-header js-hide-nav">

            <div class="wrapper">

                <a href="/" class="logo animate-me" title="Noesis">
                    <img src="/images/logos/noesis-gui-logo.svg" alt="NoesisGUI">
                </a>

                <div class="user-management">
                    <iframe src="/includes/user.php" scrolling="no"></iframe>
                </div>

                <a title="Menu" href="/" class="mobile-menu" rel="nofollow">
                    <i class="burger-icon"></i>
                </a>

                <nav class="primary-nav site-nav" role="navigation">
                    <ul>
                        <li><a href="/" title="NoesisGUI Main Features"><span>features</span></a></li>
                        <li><a href="/licensing.php" title="NoesisGUI Licensing"><span>licensing</span></a></li>
                        <li class="has-children"><a data-id="child-nav" href="/forums" title="NoesisGUI Developer Resources" class="js-mobile-2nd-nav active"><span>developer</span></a>
                            <nav class="child-nav" id="child-nav">
                                <ul>
                                    <li><a href="/forums" title="NoesisGUI Forums">forums</a></li>
                                    <li><a href="/developers/samples.php" title="NoesisGUI Samples">samples</a></li>
                                    <li><a href="/xamltoy" title="NoesisGUI XamlToy">xamltoy</a></li>
                                    <li><a href="/developers/downloads.php" title="NoesisGUI Downloads">downloads</a></li>
                                    <li><a href="/docs/Gui.Core.Index.html" title="NoesisGUI Documentation" class="active">documentation</a></li>
                                    <li><a href="/bugs/my_view_page.php" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker">bugtracker</a></li>
                                    <li><a href="/bugs/roadmap_page.php" target="_blank" rel="nofollow" title="NoesisGUI Roadmap">roadmap</a></li>
                                </ul>
                            </nav>
                        </li>
                        <li><a href="/contact.php" title="Contact Information"><span>Contact</span></a></li>
                    </ul>
                </nav>

            </div>

        </header>

        <header id="doc-header">
            <img src="noesis-gui-logo.svg" alt="NoesisGUI">
        </header>

        <div class="main-content" role="main">

            <nav id="noesis-secondary-nav" class="secondary-nav site-nav js-hide-nav">
                <div class="wrapper">
                    <ul>
                        <li><a href="/forums" title="NoesisGUI Forums">forums</a></li>
                        <li><a href="/developers/samples.php" title="NoesisGUI Samples">samples</a></li>
                        <li><a href="/xamltoy" title="NoesisGUI XamlToy">xamltoy</a></li>
                        <li><a href="/developers/downloads.php" title="NoesisGUI Downloads">downloads</a></li>
                        <li><a href="/docs/Gui.Core.Index.html" title="NoesisGUI Documentation" class="active">documentation</a></li>
                        <li><a href="/bugs/my_view_page.php" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker">bugtracker</a></li>
                        <li><a href="/bugs/roadmap_page.php" target="_blank" rel="nofollow" title="roadmap">roadmap</a></li>
                    </ul>
                </div>
            </nav>


            <div class="documentation-article">

                <div class="wrapper">

                    <div id="noesis_web_contenidosMain" class="noesis_web_contenidosMain sozo-content">
                        <div id="noesis_doc_wrap">

                            <div class="noesis_doc_header_menu">
                                <a href="Gui.Core.Index.html" class="noesis_doc_header_link">
                                    <img src="blue-home-icon.png?version=1.0" alt="Documentation Index" title="Documentation Index">
                                </a>
                            </div>

                            <div class="noesis_doc_content">

        <!-- NOESIS WEB ------- END ------- -->


<h1 class="title">Dependency System</h1>

<div class="section" id="introduction">
<h1>Introduction</h1>
<p>One of the primary architectural philosophies used in building declarative interfaces was a preference for properties over methods or events. Properties are declarative and allow you to more easily specify intent instead of action. This also supported a model driven, or data driven, system for displaying user interface content. This philosophy had the intended effect of creating more properties that you could bind to, in order to better control the behavior of an application.</p>
<p>In order to have more of the system driven by properties, a richer property system than what reflection provides was needed. A simple example of this richness is change notifications. In order to enable two way binding, you need both sides of the bind to support change notification. In order to have behavior tied to property values, you need to be notified when the property value changes.</p>
<p>UI provides a richer property system, derived from the <a class="reference external" href="Gui.DependencySystem._DependencyObject.html">DependencyObject</a> type. The property system is truly a &quot;dependency&quot; property system in that it tracks dependencies between property expressions and automatically revalidates property values when dependencies change. For example, if you have a <a class="reference external" href="Gui.DependencySystem._DependencyProperty.html">DependencyProperty</a> that inherits (like FontSize), the system is automatically updated if the property changes on a parent of an element that inherits the value.</p>
<p>One of the most important concepts in the property system are property <a class="reference external" href="Gui.DependencySystem._Expression.html">Expressions</a>. Through expressions a property value can be calculated and updated in many different forms: a expression can assign a value from a ResourceDictionary, can be bound to another object property or data bound.</p>
<p>The property system also provides for sparse storage of property values. Because objects can have dozens (if not hundreds) of properties, and most of the values are in their default state (inherited, set by styles, etc.), not every instance of an object needs to have the full weight of every property defined on it.</p>
<p>The final new feature of the property system is the notion of attached properties. UI elements are built on the principle of composition and component reuse. It is often the case that some containing element (like a Grid layout element) needs additional data on child elements to control its behavior (like the Row/Column information). Instead of associating all of these properties with every element, any object is allowed to provide property definitions for any other object.</p>
</div>
<div class="section" id="id1">
<h1>DependencyObject</h1>
<div class="section" id="id2">
<h2>Introduction</h2>
<p>The DependencyObject base class enables derived objects to use the dependency property system.</p>
<p>It also provides the following services and characteristics:</p>
<ul class="simple">
<li>Dependency property hosting support. You register a dependency property by calling the <strong>RegisterProperty</strong> or <strong>RegisterPropertyRO</strong> (read-only property) method, and storing the created property as a public static field in your class.</li>
<li>Attached property hosting support. You register an attached property by calling the RegisterProperty method, and storing the created property as a public static field in your class. Your attached property can then be set on any class that derives from DependencyObject.</li>
<li>Get, set, and clear utility methods for values of any dependency properties that exist on the DependencyObject.</li>
<li>Metadata, coerce value support, property changed notification, and override callbacks for dependency properties or attached properties. Also, the DependencyObject class facilitates the per-owner property metadata for a dependency property.</li>
</ul>
<p>It is the common base class for classes derived from Visual, UIElement, or Freezable.</p>
</div>
<div class="section" id="implementation">
<h2>Implementation</h2>
<p>Supposing we have a class deriving from DependencyObject:</p>
<div class="highlight"><pre><span></span><span class="c1">/// A button that raises Click event after a delay time</span>
<span class="k">class</span> <span class="nc">DelayedButton</span><span class="o">:</span> <span class="k">public</span> <span class="n">Button</span>
<span class="p">{</span>
    <span class="n">NS_DECLARE_REFLECTION</span><span class="p">(</span><span class="n">DelayedButton</span><span class="p">,</span> <span class="n">Button</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
<p>Inheritors must take care of some important points about NoesisGUI implementation of the DependencyObject:</p>
<ol class="arabic simple">
<li>DependencyObject is an <strong>IComponentInitializer</strong> class. Before object is initialized, all value modifications are not notified, and expressions are not evaluated (that means that resources and bindings are not resolved). Derived classes must initialize instance members that are not dependency properties overriding the <strong>OnInit</strong> function. Inheritors must call parent implementation to not break dependency object initialization:</li>
</ol>
<blockquote>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">OnInit</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">ParentClass</span><span class="o">::</span><span class="n">OnInit</span><span class="p">();</span>

    <span class="n">InitComponent</span><span class="p">(</span><span class="n">mOtherInfo</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</blockquote>
<ol class="arabic simple" start="2">
<li>DependencyObject provides an <strong>OnPropertyChanged</strong> function to notify inheritors of property changes. Inheritors must call parent implementation to not break the notification system:</li>
</ol>
<blockquote>
<div class="highlight"><pre><span></span><span class="n">NsBool</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">OnPropertyChanged</span><span class="p">(</span><span class="k">const</span> <span class="n">DependencyPropertyChangedEventArgs</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">NsBool</span> <span class="n">handled</span> <span class="o">=</span> <span class="n">ParentClass</span><span class="o">::</span><span class="n">OnPropertyChanged</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">handled</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">prop</span> <span class="o">==</span> <span class="n">DelayProperty</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// property change management here</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">handled</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</blockquote>
</div>
</div>
<div class="section" id="id3">
<h1>DependencyProperty</h1>
<div class="section" id="id4">
<h2>Introduction</h2>
<p>The purpose of dependency properties is to provide a way to compute the value of a property based on the value of other inputs. These other inputs might include system properties such as themes and user preference, just-in-time property determination mechanisms such as data binding and animations/storyboards, multiple-use templates such as resources and styles, or values known through parent-child relationships with other elements in the element tree.</p>
<p>In addition, a dependency property can be implemented to provide self-contained validation, default values, callbacks that monitor changes to other properties, and a system that can coerce property values based on potentially runtime information.</p>
<p>Derived classes can also change some specific characteristics of an existing property by overriding dependency property metadata, rather than overriding the actual implementation of existing properties or creating new properties.</p>
</div>
<div class="section" id="id5">
<h2>Implementation</h2>
<p>NoesisGUI implements dependency property system over reflection metadata support. Every dependency object stores its dependency properties inside a reflection TypeMetaData derived class, the <strong>DependencyData</strong>. This class provides functionality to register dependency properties associated with a reflection type.</p>
<p>To create a new derived DependencyObject class we begin defining the public dependency properties it will have:</p>
<div class="highlight"><pre><span></span><span class="c1">// DelayedButton.h</span>

<span class="k">namespace</span> <span class="n">Tutorials</span>
<span class="p">{</span>

<span class="k">class</span> <span class="nc">DelayedButton</span><span class="o">:</span> <span class="k">public</span> <span class="n">Button</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">/// Dependency properties</span>
    <span class="c1">//@{</span>
    <span class="k">static</span> <span class="k">const</span> <span class="n">DependencyProperty</span><span class="o">*</span> <span class="n">DelayProperty</span><span class="p">;</span>
    <span class="c1">//@}</span>
<span class="p">};</span>

<span class="p">}</span>
</pre></div>
<p>Then we must register the property in the dependency system:</p>
<div class="highlight"><pre><span></span><span class="c1">// DelayedButton.cpp</span>

<span class="n">NS_IMPLEMENT_REFLECTION</span><span class="p">(</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">NsMeta</span><span class="o">&lt;</span><span class="n">TypeId</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Tutorials.DelayedButton&quot;</span><span class="p">);</span>
    <span class="n">DependencyData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">NsMeta</span><span class="o">&lt;</span><span class="n">DependencyData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">TypeOf</span><span class="o">&lt;</span><span class="n">SelfClass</span><span class="o">&gt;</span><span class="p">());</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="s">&quot;Delay&quot;</span><span class="p">,</span> <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
<p>The previous code does three things:</p>
<blockquote>
<ul class="simple">
<li>Assign the <strong>TypeId</strong> used to register the class in the ComponentFactory, so XAML parser is able to create instances of DelayedButton when parsing a XAML file.</li>
<li><strong>NsMeta</strong> creates a metadata associated with the reflection of DelayedButton class, that would be used by dependency system to look for dependency properties registered by this class.</li>
<li><strong>RegisterProperty</strong> creates a property in the dependency system named &quot;Delay&quot;, with a default value of 1.0f, and it is associated to DelayedButton class.</li>
<li>RegisterProperty also assigns the created property to the DelayProperty public member.</li>
</ul>
</blockquote>
<p>After this we can use that class from a xaml like this:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;local:DelayedButton</span> <span class="na">Delay=</span><span class="s">&quot;1.5&quot;</span><span class="nt">/&gt;</span>
</pre></div>
<p>Or in code:</p>
<div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">&gt;</span> <span class="n">btn</span> <span class="o">=</span> <span class="n">Noesis</span><span class="o">::</span><span class="n">MakePtr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">btn</span><span class="o">-&gt;</span><span class="n">SetValue</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">::</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="mf">1.5f</span><span class="p">);</span>
</pre></div>
<p>The function <strong>SetValue</strong> is a templated method of DependencyObject that sets the local value of the specified dependency property in the object. To make it easier to modify and access dependency property values, we usually wrap them with getter/setter methods in the owner class (we omit the above code to make it more clear):</p>
<div class="highlight"><pre><span></span><span class="c1">// DelayedButton.h</span>

<span class="k">namespace</span> <span class="n">Tutorials</span>
<span class="p">{</span>

<span class="k">class</span> <span class="nc">DelayedButton</span><span class="o">:</span> <span class="k">public</span> <span class="n">Button</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">/// Gets or sets button click delay in seconds</span>
    <span class="c1">//@{</span>
    <span class="kt">float</span> <span class="n">GetDelay</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetDelay</span><span class="p">(</span><span class="kt">float</span> <span class="n">delay</span><span class="p">);</span>
    <span class="c1">//@}</span>
<span class="p">};</span>

<span class="p">}</span>

<span class="c1">// DelayedButton.cpp</span>

<span class="k">namespace</span> <span class="n">Tutorials</span>
<span class="p">{</span>

<span class="kt">float</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">GetDelay</span><span class="p">()</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">GetValue</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">SetDelay</span><span class="p">(</span><span class="kt">float</span> <span class="n">delay</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">SetValue</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="n">delay</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">}</span>

<span class="c1">// in use...</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">&gt;</span> <span class="n">btn</span> <span class="o">=</span> <span class="n">Noesis</span><span class="o">::</span><span class="n">MakePtr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">btn</span><span class="o">-&gt;</span><span class="n">SetDelay</span><span class="p">(</span><span class="mf">1.5f</span><span class="p">);</span>
</pre></div>
<p>As we see in the example, dependency properties can have extra information associated with a reflection type. This metadata is stored in a <a class="reference external" href="Gui.DependencySystem._PropertyMetadata.html">PropertyMetadata</a> object.</p>
</div>
</div>
<div class="section" id="id6">
<h1>PropertyMetadata</h1>
<p>When registering a dependency property, we use a PropertyMetadata object to set some values associated with the property.</p>
<div class="section" id="default-value">
<h2>Default Value</h2>
<p>First we can defined its <strong>default value</strong>. This value could probably be stored inside the property, but the default value (and other info that will be explained later) is stored in a metadata because a dependency property can have different metadatas associated with different types. This gives us the potential to override the default value of a property in derived classes. For example:</p>
<div class="highlight"><pre><span></span><span class="c1">// DerivedDelayedButton.cpp</span>

<span class="n">NS_IMPLEMENT_REFLECTION</span><span class="p">(</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DerivedDelayedButton</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DependencyData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">NsMeta</span><span class="o">&lt;</span><span class="n">DependencyData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">TypeOf</span><span class="o">&lt;</span><span class="n">SelfClass</span><span class="o">&gt;</span><span class="p">());</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">OverrideMetadata</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayedButton</span><span class="o">::</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="s">&quot;Delay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">5.0f</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
<p>Instances of the derived class will have a different default value:</p>
<div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">&gt;</span> <span class="n">btn1</span> <span class="o">=</span> <span class="n">Noesis</span><span class="o">::</span><span class="n">MakePtr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="o">&gt;</span><span class="p">();</span>
<span class="kt">float</span> <span class="n">delayBtn1</span> <span class="o">=</span> <span class="n">btn1</span><span class="o">-&gt;</span><span class="n">GetDelay</span><span class="p">();</span> <span class="c1">// -&gt; returns 1.0f</span>

<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DerivedDelayedButton</span><span class="o">&gt;</span> <span class="n">btn2</span> <span class="o">=</span> <span class="n">Noesis</span><span class="o">::</span><span class="n">MakePtr</span><span class="o">&lt;</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DerivedDelayedButton</span><span class="o">&gt;</span><span class="p">();</span>
<span class="kt">float</span> <span class="n">delayBtn2</span> <span class="o">=</span> <span class="n">btn2</span><span class="o">-&gt;</span><span class="n">GetDelay</span><span class="p">();</span> <span class="c1">// -&gt; returns 5.0f</span>
</pre></div>
<p>In addition, other metadata values that have not been modified (overridden) are merged with the metadata associated with the ancestor classes. This other metadata values are: the property changed callback and the coerce value callback. But PropertyMetadata derived classes can expand property info with more values.</p>
</div>
<div class="section" id="property-changed-callback">
<h2>Property Changed Callback</h2>
<p>The <strong>property changed callback</strong> is a static function that is called every time the real value of the property changes in a DependencyObject. The signature of the function must be the following:</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">PropertyChangedCallback</span><span class="p">(</span><span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="n">DependencyPropertyChangedEventArgs</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">);</span>
</pre></div>
<p>The function receives the object where the property is changed, and a struct with change info:</p>
<blockquote>
<ul class="simple">
<li><em>e.prop:</em> The property that has changed</li>
<li><em>e.oldValue:</em> The value in the dependency object before the change</li>
<li><em>e.newValue:</em> The new value set in the dependency object</li>
</ul>
</blockquote>
<p>Using this info a class can manage changes of its dependency properties and update other values or launch events.</p>
</div>
<div class="section" id="coerce-value-callback">
<h2>Coerce Value Callback</h2>
<p>The <strong>coerce value callback</strong> is a static function that is called whenever a dependency property value is being re-evaluated, or coercion is specifically requested through <em>CoerceValue</em> method. The signature of the function must be the following:</p>
<div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="nf">CoerceValueCallback</span><span class="p">(</span><span class="k">const</span> <span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">baseValue</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">coercedValue</span><span class="p">);</span>
</pre></div>
<p>Coercion interacts with the base value of a dependency property to ensure that some constraints are applied as those constraints exist at the time, but the base value is still retained. The most common use of the coerce callback is to ensure that a value is between minimum and maximum values. Continuing with the previous example, we can define two more properties, <em>MinimumDelay</em> and <em>MaximumDelay</em>, in our DelayedButton class, and associate a CoerceValueCallback to the Delay property:</p>
<div class="highlight"><pre><span></span><span class="c1">// DelayedButton.h</span>

<span class="k">class</span> <span class="nc">DelayedButton</span><span class="o">:</span> <span class="k">public</span> <span class="n">Button</span>
<span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="k">static</span> <span class="kt">bool</span> <span class="n">CoerceDelay</span><span class="p">(</span><span class="k">const</span> <span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">baseValue</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">coercedValue</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// DelayedButton.cpp</span>

<span class="kt">bool</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">CoerceDelay</span><span class="p">(</span><span class="k">const</span> <span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">baseValue</span><span class="p">,</span>
    <span class="kt">void</span><span class="o">*</span> <span class="n">coercedValue</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">DelayedButton</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">DelayedButton</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">newValue</span> <span class="o">=</span> <span class="o">*</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">float</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">baseValue</span><span class="p">);</span>
    <span class="kt">float</span><span class="o">&amp;</span> <span class="n">coerced</span> <span class="o">=</span> <span class="o">*</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">coercedValue</span><span class="p">);</span>

    <span class="n">coerced</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">btn</span><span class="o">-&gt;</span><span class="n">GetMinimumDelay</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">newValue</span><span class="p">,</span> <span class="n">btn</span><span class="o">-&gt;</span><span class="n">GetMaximumDelay</span><span class="p">()));</span>

    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">NS_IMPLEMENT_REFLECTION</span><span class="p">(</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DependencyData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">NsMeta</span><span class="o">&lt;</span><span class="n">DependencyData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">TypeOf</span><span class="o">&lt;</span><span class="n">SelfClass</span><span class="o">&gt;</span><span class="p">());</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="s">&quot;Delay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CoerceDelay</span><span class="p">));</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MinimumDelayProperty</span><span class="p">,</span> <span class="s">&quot;MinimumDelay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">));</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MaximumDelayProperty</span><span class="p">,</span> <span class="s">&quot;MaximumDelay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">10.0f</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
<p>But we also need to ensure that maximum value is greater than minimum value, so we apply coerce functions to that property too:</p>
<div class="highlight"><pre><span></span><span class="c1">// DelayedButton.h</span>

<span class="k">class</span> <span class="nc">DelayedButton</span><span class="o">:</span> <span class="k">public</span> <span class="n">Button</span>
<span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="k">static</span> <span class="kt">bool</span> <span class="n">CoerceMax</span><span class="p">(</span><span class="k">const</span> <span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">baseValue</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">coercedValue</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// DelayedButton.cpp</span>

<span class="kt">bool</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">CoerceMax</span><span class="p">(</span><span class="k">const</span> <span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">baseValue</span><span class="p">,</span>
    <span class="kt">void</span><span class="o">*</span> <span class="n">coercedValue</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">DelayedButton</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">DelayedButton</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">newValue</span> <span class="o">=</span> <span class="o">*</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">float</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">baseValue</span><span class="p">);</span>
    <span class="kt">float</span><span class="o">&amp;</span> <span class="n">coerced</span> <span class="o">=</span> <span class="o">*</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">coercedValue</span><span class="p">);</span>

    <span class="n">coerced</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">btn</span><span class="o">-&gt;</span><span class="n">GetMinimumDelay</span><span class="p">(),</span> <span class="n">newValue</span><span class="p">);</span>

    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">NS_IMPLEMENT_REFLECTION</span><span class="p">(</span><span class="n">Tutorials</span><span class="o">::</span><span class="n">DelayedButton</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DependencyData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">NsMeta</span><span class="o">&lt;</span><span class="n">DependencyData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">TypeOf</span><span class="o">&lt;</span><span class="n">SelfClass</span><span class="o">&gt;</span><span class="p">());</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="s">&quot;Delay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CoerceDelay</span><span class="p">));</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MinimumDelayProperty</span><span class="p">,</span> <span class="s">&quot;MinimumDelay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">));</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MaximumDelayProperty</span><span class="p">,</span> <span class="s">&quot;MaximumDelay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">10.0f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CoerceMax</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
<p>And finally we must check if minimum and maximum values change to update current delay value:</p>
<div class="highlight"><pre><span></span><span class="c1">// DelayedButton.h</span>

<span class="k">class</span> <span class="nc">DelayedButton</span><span class="o">:</span> <span class="k">public</span> <span class="n">Button</span>
<span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">OnMinChanged</span><span class="p">(</span><span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="n">DependencyPropertyChangedEventArgs</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">);</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="nf">OnMaxChanged</span><span class="p">(</span><span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="n">DependencyPropertyChangedEventArgs</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// DelayedButton.cpp</span>

<span class="kt">void</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">OnMinChanged</span><span class="p">(</span><span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="n">DependencyPropertyChangedEventArgs</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DelayedButton</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">DelayedButton</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
    <span class="n">d</span><span class="o">-&gt;</span><span class="n">CoerceValue</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MaximumDelayProperty</span><span class="p">);</span>
    <span class="n">d</span><span class="o">-&gt;</span><span class="n">CoerceValue</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">DelayedButton</span><span class="o">::</span><span class="n">OnMaxChanged</span><span class="p">(</span><span class="n">DependencyObject</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="n">DependencyPropertyChangedEventArgs</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DelayedButton</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">DelayedButton</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
    <span class="n">d</span><span class="o">-&gt;</span><span class="n">CoerceValue</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">NS_IMPLEMENT_REFLECTION</span><span class="p">(</span><span class="n">DelayedButton</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DependencyData</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="n">NsMeta</span><span class="o">&lt;</span><span class="n">DependencyData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">TypeOf</span><span class="o">&lt;</span><span class="n">SelfClass</span><span class="o">&gt;</span><span class="p">());</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DelayProperty</span><span class="p">,</span> <span class="s">&quot;Delay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CoerceDelay</span><span class="p">));</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MinimumDelayProperty</span><span class="p">,</span> <span class="s">&quot;MinimumDelay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">OnMinChanged</span><span class="p">));</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">RegisterProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MaximumDelayProperty</span><span class="p">,</span> <span class="s">&quot;MaximumDelay&quot;</span><span class="p">,</span>
        <span class="n">PropertyMetadata</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="mf">10.0f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">OnMaxChanged</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">CoerceMax</span><span class="p">)));</span>
<span class="p">}</span>
</pre></div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id7">Introduction</a></li>
<li><a class="reference internal" href="#id1" id="id8">DependencyObject</a><ul>
<li><a class="reference internal" href="#id2" id="id9">Introduction</a></li>
<li><a class="reference internal" href="#implementation" id="id10">Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3" id="id11">DependencyProperty</a><ul>
<li><a class="reference internal" href="#id4" id="id12">Introduction</a></li>
<li><a class="reference internal" href="#id5" id="id13">Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6" id="id14">PropertyMetadata</a><ul>
<li><a class="reference internal" href="#default-value" id="id15">Default Value</a></li>
<li><a class="reference internal" href="#property-changed-callback" id="id16">Property Changed Callback</a></li>
<li><a class="reference internal" href="#coerce-value-callback" id="id17">Coerce Value Callback</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


        <!-- NOESIS WEB ------- BEGIN ------- -->

                            </div> <!-- eo noesis_doc_content -->
                        </div> <!-- eo doc_wrap -->
                    </div> <!-- eo noesis_web_contenidosMain -->

                </div> <!-- eo wrapper -->

            </div>  <!-- eo documentation-article -->

        </div> <!-- eo main-content -->

        <footer id="footer" class="SOZO-footer">
            <div class="wrapper">
                <ul class="footer social-icon-list">
                    <li>
                        <a href="https://twitter.com/noesisengine" title="Noesis Twitter" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-twitter">
                                    <use xlink:href="#svg-icon-social-twitter"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/noesis-technologies-sl" title="Noesis Linkedin" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-linkedin">
                                    <use xlink:href="#svg-icon-social-linkedin"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://vimeo.com/noesisengine" title="Noesis Vimeo" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-vimeo">
                                    <use xlink:href="#svg-icon-social-vimeo"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/user/NoesisTechnologies" title="Noesis Youtube" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-youtube">
                                    <use xlink:href="#svg-icon-social-youtube"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                </ul>

                <div class="footer-extended">

                    <div class="cols">

                        <nav class="unit">
                            <h3 class="title">home</h3>
                            <ul>
                                <li><a href="/#goto-home-main-features" class="goto" title="NoesisGUI Main Features">Features</a></li>
                                <li><a href="/#goto-home-apis" class="goto" title="NoesisGUI APIs and Integrations">Integrations</a></li>
                                <li><a href="/#goto-home-platforms" class="goto" title="NoesisGUI Supported Platforms">Platforms</a></li>
                                <li><a href="/#goto-home-clients" class="goto" title="NoesisGUI Happy Clients">Clients</a></li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Licensing</h3>
                            <ul>
                                <li><a href="/licensing.php#goto-licensing-prices" class="goto" title="NoesisGUI Prices">Prices</a></li>
                                <li><a href="/licensing.php#goto-licensing-faqs" class="goto" title="NoesisGUI Licensing FAqs">FAQs</a></li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Developers</h3>
                            <ul>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/forums/index.php" class="goto" title="NoesisGUI Forums" style="display:inline;margin-right:1em;">Forums</a>
                                        <a href="/bugs/my_view_page.php" class="goto" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker"style="display:inline;">Bugtracker</a>
                                    </div>
                                </li>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/developers/samples.php" class="goto" title="NoesisGUI Samples and Tutorials"style="display:inline;margin-right:1em;">Samples</a>
                                        <a href="/xamltoy" class="goto" title="NoesisGUI XamlToy" style="display:inline;">XamlToy</a>
                                    </div>
                                </li>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/bugs/roadmap_page.php" class="goto" target="_blank" rel="nofollow" title="NoesisGUI Roadmap"style="display:inline;margin-right:1em;">Roadmap</a>
                                        <a href="/docs/Gui.Core.Changelog.html" class="goto" title="NoesisGUI Version Changelog"style="display:inline;">Changelog</a>
                                    </div>
                                </li>
                                <li>
                                    <a href="/docs/Gui.Core.Index.html" class="goto" title="NoesisGUI Documentation">Documentation</a>
                                </li>
                                <li>
                                    <a href="/developers/downloads.php" class="goto" title="NoesisGUI Downloads">Downloads</a>
                                </li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Contact</h3>
                            <ul>
                                <li><a href="/contact.php#goto-contact-about" class="goto" title="About Noesis">About</a></li>
                                <li><a href="/contact.php#goto-contact-details" class="goto" title="Contact Noesis">Contact details</a></li>
                            </ul>
                        </nav>

                    </div>

                    <nav class="legal">
                        <figure class="SOZO-media logo">
                            <img src="/images/logos/noesis-logo-stacked.png">
                        </figure>
                        <p>&copy; 2017 Noesis Technologies</p>
                        <a href="/legal/privacy.php" title="Privacy Policy" rel="nofollow">Privacy</a>
                        <a href="/legal/cookies.php" title="Cookie Policy" rel="nofollow">Cookies</a>
                        <a href="/legal/terms-of-use.php" title="Terms and Conditions" rel="nofollow">Terms &amp; Conditions</a>
                    </nav>

                </div>

                <div class="footer-reduced">
                    <ul>
                        <li><a href="/" class="goto" title="NoesisGUI Main Features">Features</a></li>
                        <li><a href="/licensing.php" class="goto" title="NoesisGUI Prices">Licensing</a></li>
                        <li><a href="/forums" class="goto" title="NoesisGUI Forums">Developer</a></li>
                        <li><a href="/contact.php" class="goto" title="NoesisGUI Prices">Contact</a></li>
                    </ul>
                    <ul class="copyright-legal">
                        <li>&copy; 2017 Noesis Technologies</li>
                        <li><a href="/legal/privacy.php" title="Privacy Policy" rel="nofollow">Privacy</a></li>
                        <li><a href="/legal/terms-of-use.php" title="Terms and Conditions" rel="nofollow">Terms &amp; Conditions</a></li>
                    </ul>
                </div>
            </div>
        </footer>

        <footer id="doc-footer">
            <span>&copy; 2017 Noesis Technologies</span>
        </footer>

    </div> <!-- eo developers documentation -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!-- Use if you want latest version of 1x -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->

    <!-- If using 1.11.3 make sure you update the fallback file below to 1.11.3 -->
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery.js"><\/script>')</script>

    <script src="/js/plugins.1481882071.js"></script><script src="/js/main.1485346364.js"></script>

    <!-- NOESIS WEB ------- END ------- -->


</div>
</body>
</html>
